# 1 什么是因特网

1、描述因特网的具体构成，即构成因特网的基本硬件和软件组件

2、根据为分布式应用提供服务的联网基础设施来描述因特网

## 1.1 具体构成描述

与因特网相连的计算机和其他设备称为主机（host）或端系统（end system）。

端系统通过通信链路（communication link）和分组交换机（packet switch）连接到一起。

当一台端系统要向另一台端系统发送数据时，发送端系统将数据分段，并为每段加上首部字节。由此形成的信息包用计算机网络的术语来说称为分组（packet）。

分组交换机最著名的类型是路由器（router）和链路层交换机（link-layer switch）。

一个分组所经历的一系列通信链路和分组交换机称为通过该网络的路径（route或path）。

端系统通过因特网服务提供商（Internet Service Provider，ISP）接入因特网。每个ISP自身就是一个由多台分组交换机和多段通信链路组成的网络。

## 1.2 服务描述

与因特网相连的端系统提供了一个套接字接口（socket interface），该接口规定了运行在一个端系统上的程序请求因特网基础设施向运行在另一个端系统上的特定目的地程序交付数据的方式。

因特网套接字接口是一套发送程序必须遵循的规则集合。

## 1.3 什么是协议

协议（protocol）定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送或接受一条报文或其他事件所采取的动作。

# 2 网络边缘

端系统位于因特网的边缘。

主机有时可以进一步划分为两类：客户机（client）和服务器（server）。

## 2.1 接入网

接入网是指将端系统物理连接到其边缘路由器（edge router）的网络。

边缘路由器是端系统到任何其他远程端系统的路径上的第一台路由器。

接入网的几种类型：

- 1、家庭接入：DSL、电缆、FTTH、拨号和卫星

  数字用户线（Digital Subscriber Line，DSL），通常从本地电话公司处获得DSL因特网接入。家庭DSL调制解调器通过现有的电话线（双绞铜线）与位于电话公司的数字用户线接入复用器（DSLAM）交换数据。

  电缆因特网接入（cable Internet access）

  光纤到户（Fiber To The Home，FTTH）提供了更高速率。包含两种竞争性的光纤分布体系结构：有源光纤网络（Active Optical Network，AON）和无源光纤网络（Passive Optical Network，PON）。AON本质上就是交换以太网。

  PON的结构是这样的：每个家庭具有一个光纤网络端接器（Optical Network Terminator，ONT），ONT由专门的光纤连接到邻近的分配器（splitter），该分配器把一些家庭集结到一根共享的光纤，再连接到本地电话和公司的中心局中的光纤线路端接器（Optical Line Terminator，OLT）

- 2、企业（和家庭）接入：以太网和WiFi

  使用局域网（LAN）将端系统连接到边缘路由器。而基于IEEE 802.11技术的无线LAN接入，俗称WiFi。

- 3、广域无线接入：3G和LTE



## 2.2 物理媒体

物理媒体（physical medium）是传播电磁波或光脉冲的介质。

物理媒体分为两种类型：导引型媒体（guided media）和非导引型媒体（unguided media）。

导引型媒体：电波沿着固体媒体前行，光缆、双绞铜线、同轴电缆。

非导引型媒体：电波在空气或外层空间中传播，无线局域网、数字卫星频道。

- 1、双绞铜线：无屏蔽双绞线（Unshielded Twisted Pair，UTP），就是一般连接到电脑上的“网线”。
- 2、同轴电缆：在电缆电视系统中常见。
- 3、光纤
- 4、陆地无线电信道
- 5、卫星无线电信道：同步卫星和近地轨道卫星



# 3 网络核心

网络核心是由互联因特网端系统的分组交换机和链路构成的网状网络。

## 3.1 分组交换

端系统彼此交换报文（message），报文包含协议设计者需要的任何东西。长报文划分为较小的数据块，称为分组（packet）。

多数分组交换机在链路的输入端使用存储转发传输（store-and-forward transmission）机制：路由器在接收完该packet的所有比特后，才能开始转发该packet。

一个到达的packet如果发现路由器缓存已被其他等待传输的packet完全充满时，会出现丢包（packet loss），到达的packet或以及排队的packet之一将被丢弃。

每台路由器有一个转发表（forwarding table），用于将目的地址或目的地址的一部分（IP）映射成为输出链路。

## 3.2 电路交换

当两台主机要通信时，该网络在两台主机之间创建一条专用的端到端连接（end-to-end connectioin）。典型场景：拨打电话时，其他人无法呼入。

链路中的电路是通过频分复用（Frequency-Division Multiplexing，FDM）或时分复用（Time-Division Multiplexing，TDM）来实现的。

> 未来的趋势是分组交换。

## 3.3 网络的网络

接入ISP自身之间的互联，就是创建网络的网络。

今天的因特网是一个网络的网络，其结构复杂，由十多个第一层ISP和数十万个较低层ISP组成。ISP覆盖的区域多种多样，有些跨越多个大洲和大洋，有些限于狭窄的地理区域。较低层的ISP与较高层的ISP相连，较高层ISP彼此互联。用户和内容提供商是较低层ISP的客户，较低层ISP是较高层ISP的客户。近年来，主要的内容提供商也已经创建自己的网络，直接在可能的地方与较低层ISP互联。


# 4 分组交换网中的时延、丢包和吞吐量



## 4.1 分组交换网中的时延概述

节点处理时延（nodal processing delay）、排队时延（queuing delay）、传输时延（transmission delay）和传播时延（propogation delay），这些时延总体累加起来是节点总时延（total nodal delay）。

## 4.2 排队时延和丢包

 

## 4.3 端到端时延



## 4.4 计算机网络中的吞吐量



# 5 协议层次及其服务模型

利用分层的体系结构，我们可以讨论一个大而复杂系统的定义良好的特定部分。

## 5.1 分层的体系结构

分层的好处是，使某层所提供的服务实现易于改变，只要该层对其上面的层提供相同的服务，并且使用来自下面层次的相同服务，当某层的实现变化时，该系统的其余部分保持不变。

### 5.1.1 协议分层

一个协议层能够用软件、硬件或两者的结合来实现。

简要分为：

（1）应用层：是网络应用程序及它们的应用层协议存留的地方。例如：HTTP（Web文档的请求和传送），SMTP（电子邮件报文的传输），FTP（两个端系统直接的文件传送），DNS（域名系统）。

应用层协议分布在多个端系统上，位于应用层的信息分组称为报文（message）。

（2）运输层：在应用程序端点之间传送应用层报文。在因特网中，有两种运输协议，即TCP和UDP，任何一个都能运输应用层报文。TCP向它的应用程序提供了面向连接的服务，UDP协议向它的应用程序提供无连接服务。

运输层的分组称为报文段（segment）。

（3）网络层：负责将数据报从一台主机移动到另一台主机。源主机中的因特网运输层协议（TCP或UDP）向网络层递交运输层报文段和目的地址。协议包括网际协议（例如IP）和一些路由选择协议。可简称为IP层。

网络层的分组称为数据报（datagram）。

（4）链路层：沿着路径将数据报传递给下一个节点。

链路层的分组称为帧（frame）。

（5）物理层：将该帧中的一个个比特从一个节点移动到下一个节点。

### 5.1.2 OSI模型



## 5.2 封装

每一层都封装了上一层的报文，形成自己的报文，往下传递。

# 6 面对攻击的网络

什么会出现问题？计算机网络是如何受到攻击的？今天一些最为流行的攻击类型是什么？

- 1 有害程序的植入

  恶意软件植入，会删除文件，安装间谍软件来手机隐私信息，让我们的设备成为僵尸网络（botnet）并对目标主机展开垃圾邮件分发或分布式拒绝服务攻击。

  多数恶意软件是自我复制（self-replicating）的。病毒（virus）是一种需要某种形式的用户交互来感染用户设备的恶意软件。蠕虫（worm）是一种无需任何明显用户交互就能进入设备的恶意软件。

- 2 攻击服务器和网络基础设施

  拒绝服务攻击（Denial-of-Service attack，DoS攻击）

- 3 分组嗅探

  在无线传输设备的附近放置一台被动的接收机，该接收机可以得到传输的每个分组的副本。

- 4 伪装成信任的人

  IP哄骗（IP spoofing）：将具有虚假源地址的分组注入因特网的能力。

# 7 计算机网络和因特网的历史



数据包的结构：

![image-20221101192139867](https://images-lu.oss-cn-shanghai.aliyuncs.com/202211011932453.png)















