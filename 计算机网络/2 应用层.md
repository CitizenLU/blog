网络应用是计算机网络存在的理由。

# 1 应用层协议原理



## 1.1 网络应用程序体系结构

客户-服务体系结构（client-server architecture）

P2P体系结构（P2P architecture）

## 1.2 进程通信

一个进程可以被认为是运行在端系统中的一个程序。

当多个进程运行在相同的端系统上时，他们使用进程间通信机制相互通信。进程间通信的规则由端系统上的操作系统确定。

而计算机网络则关注运行在不同端系统（可能具有不同的操作系统）上的进程间的通信。

在两个不同端系统上的进程，通过跨越计算机网络交换报文（message）而相互通信。

- 1 客户和服务器进程

  在一对进程之间的通信会话场景中，发起通信的进程被标识为客户端（client），在会话开始时等待联系的进程是服务器（server）。

- 2 进程与计算机网络之间的接口

  进程通过一个称为套接字（socket）的软件接口向网络发送报文和从网络接收报文。套接字是同一台主机内应用层与运输层之间的接口。由于套接字是建立网络应用程序的可编程接口，因此套接字也称为应用程序和网络之间的应用程序编程接口（Application Programming Interface，API）。

- 3 进程寻址

  主机由IP地址（IP address）标识，端口号（port number）可以标识运行在接收主机上的接收进程（也就是接收套接字）。

## 1.3 可供应用程序使用的运输服务

在发送端的应用程序将报文推进该套接字，在该套接字的另一侧，运输层协议负责从接收进程的套接字得到该报文。

运输层协议有多种，从4个角度来分析。

- 1 可靠数据传输

  运输层协议如果能够将数据正确、完全地交付给该应用程序的另一端，那么就认为该协议提供了可靠数据传输（reliable data transfer）。

  另一种是不提供可靠数据传输，这种协议可以被容忍丢失的应用（loss-tolerant application）所接受。例如多媒体应用。

- 2 吞吐量

  具有吞吐量要求的应用程序被称为宽带敏感应用（bandwidth-sensitive application）。

- 3 定时

  即对时延的保证。

- 4 安全性



## 1.4 因特网提供的运输服务

因特网（更一般的是TCP/IP网络）为应用程序提供了两个运输层协议，即UDP和TCP。当软件开发者为因特网创建一个新的应用时，首先要做出的决定是，选择UDP还是TCP。因为他们提供了不同的服务。

- 1 TCP服务

  TCP服务模型包括面向连接服务和可靠数据传输服务。

  > 面向连接的服务

  在握手阶段后，一个TCP连接（TCP connection）就在两个进程的套接字之间建立了。这条连接是全双工的，即连接双方的进程可以在此连接上同时进行报文收发。当结束报文发送时，必须拆除该连接。

  > 可靠的数据传送服务

  通信进程能够依靠TCP，无差错、按适当顺序交付所有发送的数据。

- 2 UDP服务

  UDP是一种不提供不必要服务的轻量级运输协议，它仅提供最小服务。UDP是无连接的。当进程将一个报文发送进UDP套接字时，UDP协议并不保证该报文将到达接收进程。并且，到达接收进程的报文也可能是乱序到达的。

| 应用         | 应用层协议                                         | 支撑的运输协议 |
| ------------ | -------------------------------------------------- | -------------- |
| 电子邮件     | SMTP [RFC 5321]                                    | TCP            |
| 远程终端访问 | Telnet [RFC 854]                                   | TCP            |
| Web          | HTTP [RFC 2616]                                    | TCP            |
| 文件传输     | FTP [RFC 959]                                      | TCP            |
| 流式多媒体   | HTTP (如YouTube)                                   | TCP            |
| 因特网电话   | SIP [RFC 3261]、RTP [RFC 3550] 或专用的（如Skype） | UDP或TCP       |



## 1.5 应用层协议





## 1.6 本书涉及的网络应用





# 2 Web和HTTP







# 3 因特网中的电子邮件





# 4 DNS：因特网的目录服务





# 5 P2P文件分发



# 6 视频流和内容分发网





# 7 套接字编程：生成网络引用

























